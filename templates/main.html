<html>
  <head>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>

    <script type="text/javascript">
  	  window.onload = function () {

  		var dps = []; // dataPoints

  		var chart = new CanvasJS.Chart("chartContainer",{
  			title :{
  				text: "Ping to 8.8.8.8 (epoch time)"
  			},
        axisY:{
          minimum: 0,
          maximum: 300
        },
  			data: [{
  				type: "line",
  				dataPoints: dps
  			}]
  		});

  		var dataLength = 86400; // number of dataPoints visible at any point

      var socket = io.connect('http://' + document.domain + ':' + location.port);
      socket.on('pingData', function(data) {
        console.log(data);
        dps.push({
          x: data.time,
          y: data.ping
        });
        if (dps.length > dataLength)
  			{
  				dps.shift();
  			}
        chart.render();
      });
  	}
	</script>
	<script type="text/javascript" src="/static/scripts/canvasjs.min.js"></script>

  </head>

  <body>
    <div id="chartContainer" style="height: 95%; width:100%;">
    </div>
    <div>
      (It may take a second to load)
    </div>
  </body>
</html>
